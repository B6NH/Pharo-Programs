Object subclass: #Angel	instanceVariableNames: 'position cursedPositions'	classVariableNames: ''	poolDictionaries: ''	category: 'AngelProblem'!!Angel commentStamp: 'ab 3/4/2019 21:09' prior: 0!Angel class for Angel Problem!!Angel methodsFor: 'initialization' stamp: 'ab 3/5/2019 00:55'!initialize	cursedPositions := OrderedCollection new.	position := 6@6! !!Angel methodsFor: 'accessing' stamp: 'ab 3/4/2019 20:56'!position	^ position! !!Angel methodsFor: 'instance creation' stamp: 'ab 3/13/2019 21:36'!newFreePosition	|newFreePosition|	[newFreePosition := self newPositionInRange. self isPositionFree: newFreePosition]		whileFalse.	^ newFreePosition		! !!Angel methodsFor: 'instance creation' stamp: 'ab 3/4/2019 22:58'!newPositionInRange	^ self xPositionInRange @ self yPositionInRange! !!Angel methodsFor: 'controlling' stamp: 'ab 3/5/2019 00:57'!jump	self isGameOver		ifFalse: [ position := self newFreePosition. self curseRandomField ]		ifTrue: []			! !!Angel methodsFor: 'testing' stamp: 'ab 3/5/2019 00:58'!isPositionFree: aPosition	^ position ~= aPosition and: [ (self isCursedAt: aPosition) not ]! !!Angel methodsFor: 'testing' stamp: 'ab 3/4/2019 22:38'!isCursedAt: aPoint 	^ cursedPositions anySatisfy: [ :each | each = aPoint ]! !!Angel methodsFor: 'testing' stamp: 'ab 3/13/2019 21:35'!isGameOver	"self shouldBeImplemented"	^ false! !!Angel methodsFor: 'as yet unclassified' stamp: 'ab 3/4/2019 22:56'!xPositionInRange	^ self position x + self randomMove! !!Angel methodsFor: 'as yet unclassified' stamp: 'ab 3/5/2019 00:49'!curseRandomField	cursedPositions add: self newFreePosition		! !!Angel methodsFor: 'as yet unclassified' stamp: 'ab 3/4/2019 21:00'!randomMove	^ (-10 to:10) atRandom! !!Angel methodsFor: 'as yet unclassified' stamp: 'ab 3/5/2019 00:05'!numberOfCursedPositions	^ cursedPositions size! !!Angel methodsFor: 'as yet unclassified' stamp: 'ab 3/4/2019 22:56'!yPositionInRange	^ self position y + self randomMove! !TestCase subclass: #AngelTests	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'AngelProblem'!!AngelTests methodsFor: 'tests' stamp: 'ab 3/5/2019 00:51'!testAngel	| angel jumps |	angel := Angel new. jumps := 1000.	self assert: angel position equals: 6@6.	jumps timesRepeat: [ angel jump ].	self assert: angel numberOfCursedPositions equals: jumps! !
